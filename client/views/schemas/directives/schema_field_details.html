<!--
    Electric Brain is an easy to use platform for machine learning.
    Copyright (C) 2016 Electric Brain Software Corporation

    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU Affero General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU Affero General Public License for more details.

    You should have received a copy of the GNU Affero General Public License
    along with this program.  If not, see <http://www.gnu.org/licenses/>.
-->

<div class="row schema-field-details">
    <div class="col-xs-12">
        <div class="ibox" ng-if="field.isString || field.isNumber">
            <div class="ibox-title">
                <h5>Interpretation Chain</h5>
            </div>
            <div class="ibox-content">
                <div ng-repeat="interpretation in field.metadata.interpretationChain">
                    <span>{{interpretation}}</span>
                    <span ng-show="$index < (field.metadata.interpretationChain.length - 1)">&equals;&gt;</span>
                </div>
            </div>
        </div>


        <div class="ibox">
            <div class="ibox-title">
                <h5>{{field.title}}</h5>
            </div>
            <div class="ibox-content">
                <h3>Type</h3>
                {{field.type.join(", ")}}
                <br/>
                <div>
                    <!-- If we have cardinality information for this field, display it -->
                    <div ng-if="field.metadata.total > 0">
                        <h3>Cardinality</h3>
                        <p>{{(field.metadata.cardinality * 100).toFixed(2)}}%</p>
                        <span>{{field.metadata.distinct}}&nbsp;/&nbsp;{{field.metadata.total}}</span>
                        <br/>
                    </div>

                    <eb-dynamic-directive directive-name="eb-{{field.metadata.mainInterpretation}}-interpretation-metadata" field="field"></eb-dynamic-directive>

                    <!-- Show some examples of the field -->
                    <div ng-if="field.metadata.examples.length > 0">
                        <h3>Examples</h3>
                        <div class="schema-field-examples">
                            <div ng-repeat="example in field.metadata.examples.slice(0, 10)" class="schema-details-example-value">
                                <span ng-if="field.isString || field.isNumber || field.isBoolean" class="label label-default">{{example | json}}</span>
                                <span ng-if="field.isBinary"><img src="data:image/png;base64, {{example}}"></span>
                            </div>
                        </div>
                    </div>
                    <br/>
                </div>
            </div>
        </div>
    </div>
</div>